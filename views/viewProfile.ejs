<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RYDE</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
      integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link rel="stylesheet" href="css/profile.css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    

  
  </head>
  
  <body>
    <header>
      <nav class="navbar navbar-expand-lg navbar-light bg-light w-100">
        <a class="navbar-brand" href="/">RYDE</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse " id="navbarNav">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="#">Booking</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Features</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Pricing</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Sign in / Sign up</a>
            </li>
          </ul>
        </div>
      </nav>
    </header>
    <br>
    <br>
    <nav>
      <div class="nav nav-tabs" id="nav-tab" role="tablist">
        <a class="nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-profile" role="tab"
          aria-controls="nav-home" aria-selected="true">My Profile</a>
        <a class="nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-history" role="tab"
          aria-controls="nav-contact" aria-selected="false">History</a>
        <a class="nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-listed" role="tab"
          aria-controls="nav-listed" aria-selected="false">Cars Listed</a>
      </div>
    </nav>
    <div class="tab-content" id="nav-tabContent">
      <div class="tab-pane fade show active" id="nav-profile" role="tabpanel" aria-labelledby="nav-home-tab">
        <div class="container">
          <div class="main-body">
            <div class="row gutters-sm">
              <div class="col-md-4 mb-3">
                <div class="card">
                  <div class="card-body">
                    <div class="d-flex flex-column align-items-center text-center">
                      <% if (profile[0].Profile_photo===null||profile[0].Profile_photo==="" ) { %>
                        <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="img" class="rounded-circle" width="150" >
                        <% } %>
                          <%if(profile[0].Profile_photo !==null && profile[0].Profile_photo!=="") { %>
                            <img src="/resources/<%=profile[0].Profile_photo%>" alt="img" class="rounded-circle" width="150" >
                            <% } %>
  
                              <div class="mt-3">
                                <h4>
                                  <%=profile[0].Fname%>
                                    <%=profile[0].Lname%>
                                </h4>
                                <p>
                                  <% if (profile[0].Description===null||profile[0].Description==="") { %>
                                    RYDER
                                    <% } %>
                                      <% if (profile[0].Description !==null && profile[0].Description!=="") { %>
                                        <%=profile[0].Description%>
                                          <% } %>
                      
                                      </p>
                                <p class="text-muted font-size-sm">
                                  <% if (profile[0].City===null||profile[0].City==="" ) { %>
                                    City,
                                    <% } %>
                                      <% if (profile[0].City !==null && profile[0].City!=="" ) { %>
                                        <%=profile[0].City%>,
                                          <% } %>
                                            <% if (profile[0].State===null||profile[0].State==="" ) { %>
                                              State
                                              <% } %>
                                                <% if (profile[0].State !==null && profile[0].State!=="") { %>
                                                  <%=profile[0].State%>
                                                    <% } %>
                                </p>
                                <!-- Button trigger upload -->
                                <button type="button" class="btn btn-outline-warning" data-toggle="modal"
                                  data-target="#verification">
                                  Add Verification
                                </button>
  
                                <!-- Modal -->
                                <div class="modal fade" id="verification" tabindex="-1" role="dialog"
                                  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                  <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                      <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLongTitle">Verification</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                          <span aria-hidden="true">&times;</span>
                                        </button>
                                      </div>
                                      <form class="needs-validation" novalidate action="/verification" enctype="multipart/form-data" method="post" autocomplete="off">
                                      <div class="modal-body">
                                        <div class="input-group mb-3">
                                          <div class="custom-file">
                                            <input type="file" class="custom-file-input" id="aadhar" name="aadhar"
                                              accept="image/*">
                                            <label class="custom-file-label" for="inputGroupFile02">Aadhar
                                              card/Passport</label>
                                          </div>
                                        </div>
  
                                        <div class="input-group mb-3">
                                          <div class="custom-file">
                                            <input type="file" class="custom-file-input" id="license" name="license"
                                              accept="image/*">
                                            <label class="custom-file-label" for="inputGroupFile02">Driver's
                                              License</label>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                          data-dismiss="modal">Close</button>
                                        <button type="submit" class="btn btn-warning">Save changes</button>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </form>
                                <!-- Button trigger edit -->
                                <button type="button" class="btn btn-warning" data-toggle="modal"
                                  data-target="#exampleModalCenter">
                                  Edit Info
                                </button>
  
                                <!-- Modal -->
                                <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
                                  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                  <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                      <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLongTitle">Edit Information</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                          <span aria-hidden="true"> &times;</span>
                                        </button>
                                      </div>
                                      <div class="modal-body">
  
                                        <form class="needs-validation" novalidate action="/viewProfile" enctype="multipart/form-data" method="post" autocomplete="off">
                                          <div class="form-row">
                                            <div class="form-group col-md-6">
                                              <label for="inputEmail4">First Name</label>
                                              <input class="form-control" type="text" placeholder="<%=profile[0].Fname%>"
                                                readonly>
                                            </div>
                                            <div class="form-group col-md-6">
                                              <label for="inputEmail4">Last Name</label>
                                              <input class="form-control" type="text" placeholder="<%=profile[0].Lname%>"
                                                readonly>
                                            </div>
                                            <div class="form-group col-md-6">
                                              <label for="inputEmail4">Email</label>
                                              <input type="email" class="form-control" id="inputEmail"
                                                placeholder="<%=profile[0].Email%>" readonly>
                                            </div>
                                            <div class="form-group col-md-6">
                                              <label for="inputState">State</label>
                                              <select  name="state" id="state" class="form-control">
                                                <option selected><%=profile[0].State%></option>
                                                <option value="Andhra Pradesh">Andhra Pradesh</option>
                                                  <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
                                                  <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                                  <option value="Assam">Assam</option>
                                                  <option value="Bihar">Bihar</option>
                                                  <option value="Chandigarh">Chandigarh</option>
                                                  <option value="Chhattisgarh">Chhattisgarh</option>
                                                  <option value="Dadar and Nagar Haveli">Dadar and Nagar Haveli</option>
                                                  <option value="Daman and Diu">Daman and Diu</option>
                                                  <option value="Delhi">Delhi</option>
                                                  <option value="Lakshadweep">Lakshadweep</option>
                                                  <option value="Puducherry">Puducherry</option>
                                                  <option value="Goa">Goa</option>
                                                  <option value="Gujarat">Gujarat</option>
                                                  <option value="Haryana">Haryana</option>
                                                  <option value="Himachal Pradesh">Himachal Pradesh</option>
                                                  <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                                  <option value="Jharkhand">Jharkhand</option>
                                                  <option value="Karnataka">Karnataka</option>
                                                  <option value="Kerala">Kerala</option>
                                                  <option value="Madhya Pradesh">Madhya Pradesh</option>
                                                  <option value="Maharashtra">Maharashtra</option>
                                                  <option value="Manipur">Manipur</option>
                                                  <option value="Meghalaya">Meghalaya</option>
                                                  <option value="Mizoram">Mizoram</option>
                                                  <option value="Nagaland">Nagaland</option>
                                                  <option value="Odisha">Odisha</option>
                                                  <option value="Punjab">Punjab</option>
                                                  <option value="Rajasthan">Rajasthan</option>
                                                  <option value="Sikkim">Sikkim</option>
                                                  <option value="Tamil Nadu">Tamil Nadu</option>
                                                  <option value="Telangana">Telangana</option>
                                                  <option value="Tripura">Tripura</option>
                                                  <option value="Uttar Pradesh">Uttar Pradesh</option>
                                                  <option value="Uttarakhand">Uttarakhand</option>
                                                  <option value="West Bengal">West Bengal</option>
                                              </select>
                                            </div>
                                            </div>
                                            <div class="form-row">
                                              <div class="form-group col-md-6 ">
                                                <label for="inputCity">City</label>
                                                <input type="text" class="form-control" id="City" name="City" value="<%=profile[0].City%>">
                                              </div> 
                                              <div class="form-group col-md-6">
                                                <label for="inputZip">Zip</label>
                                                <input type="text" class="form-control" id="zip" name="zip" value="<%=profile[0].Zip%>">
                                            </div>
                                          </div>
                                            <div class="input-group mb-3">
                                              <div class="custom-file">
                                                <input type="file" class="custom-file-input" id="photo"  name="photo" accept="image/*" value="<%=profile[0].Profile_photo%>">
                                                <label class="custom-file-label" for="inputGroupFile02">Insert profile
                                                  photo</label>
                                              </div>
                                            </div>
                                            <div class="form-group col-md-12">
                                              <label for="description">Enter your description</label>
                                              <br>
                                             <input class="form-control" classstype="text" name="description" id="description"  placeholder="Enter a short description..." value="<%=profile[0].Description%>" maxlength="20"></input>
                                            </div>
                                       
  
                                      
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary"
                                          data-dismiss="modal">Close</button>
                                        <button type="submit" class="btn btn-warning">Save changes</button>
                                      </div>
                                    </form>
                                  </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                    </div>
                  </div>
                </div>
              

  
              <div class="card mt-3">
                <ul class="list-group list-group-flush">
                  <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                    <h6 class="mb-0">Can drive?</h6>
                    <span class="text-secondary">
                      <% if (profile[0].License===null||profile[0].License==="") { %>
                        No
                        <% } %>
                          <% if (profile[0].License !==null && profile[0].License!=="") { %>
                            Yes
                              <% } %>
                    </span>
                  </li> 
                  <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                    <h6 class="mb-0">Number of trips</h6>
                    <span class="text-secondary"><%= countdrive %> </span>
                  </li>
                  
                  <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                    <h6 class="mb-0">Verification</h6>
                    <span class="text-secondary"> 
                      <% if (profile[0].Verification===null||profile[0].Verification==="") { %>
                      Not Done
                      <% } %>
                        <% if (profile[0].Verification !==null && profile[0].Verification!=="" ) { %>
                          Done
                            <% } %></span>
                  </li>
                </ul>
              </div>
            </div>
     
            <div class="col-md-8">
              <div class="card mb-3">
                <div class="card-body">
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">First Name</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      <%=profile[0].Fname%>
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Last Name</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      <%=profile[0].Lname%>
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">City</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      <%=profile[0].City%>
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-sm-3">
                      <h6 class="mb-0">Rydes given</h6>
                    </div>
                    <div class="col-sm-9 text-secondary">
                      <%= countrydes %> 
                    </div>
                  </div>
                  <hr>
                </div>
              </div>
              <div class="row gutters-sm">
                <% for(let i=0; i<reviews.length; i++){%>
                <div class="col-sm-6 mb-3">
                  <div class="card h-100">
                    <div class="card-body">
                      <h6 class="d-flex align-items-center mb-3">REVIEW</h6>
                      
                      <% for(let j=0; j<reviews[i].stars; j++){%>
                        <i class="bi bi-star-fill" style=" color: #ffd93b;"></i>
                        <% } %>
                      <% for(let k=0; k<(5-reviews[i].stars); k++){%>
                        <i class="bi bi-star" style="color: #ffd93b;"></i>
                      <% } %>
                      <blockquote class="blockquote">
                     <p class="card-text">"<%= reviews[i].reviews %>"</p> 
                    </blockquote>
                    <figcaption class="blockquote-footer">
                      Review By <cite title="Source Title"><%=reviews[i].Fname%> <%=reviews[i].Lname%></cite>
                    </figcaption>

                    </div>
                  </div>
                </div>
                <% } %>
              </div>
            </div>
      </div>
      </div>
      </div>
      </div>
    

  <!-- this is where history starts -->
    <div class="tab-pane fade" id="nav-history" role="tabpanel" aria-labelledby="nav-contact-tab">
  <% if (history.length===0){ %> 
    <br>
    <br>
    <br>
    <h3 class="text-center font-weight-light ">NO PAST <span style="color: #ffd93b;">RYDE</span></h3>
    <img src="images/nohistory.gif" class="text-center mx-auto d-block " height="200"  alt="GIF">
    <br>
    <div class="text-center">
      <a href="/booking"><button type="button" class="btn btn-outline-warning">Book a RYDE</button></a>
    <a href="/List"><button type="button" class="btn btn-warning">List your RYDE</button></a>
  </div>
    <% } %>
    
  <% if (history.length!==0) { %>
    <p class="display-4 text-center">Past <span style="color: #ffd93b;"><b>RYDES</b></span></p>
          <div class="container py-5">
          <div class="row ">
            <div class="col-8 mx-auto">
        
              <!-- List group-->
              <ul class="list-group shadow">
                <% for(let i=0; i<history.length; i++){%>
                <!-- list group item-->
                <li class="list-group-item">
                  <!-- Custom content-->
                  <div class="media align-items-lg-center flex-column flex-lg-row p-3">
                    <div class="media-body order-2 order-lg-1">
                      <h5 class="mt-0 mb-2 h3" style="color: #ffd93b;"><%=history[i].Car_category%></h5>
                      <p class="font-italic text-muted mb-0 lead"><%=history[i].Description%> </p>
                      <h6 class="font-weight-bold my-2">₹ <%=history[i].Price%></h6>
                      <p class="mb-0 "><b>Date:</b> <%=history[i].Date%> </p> 
                      <p class="mb-0 "><b>Duration:</b> <%=history[i].Duration_hrs%> hours </p>
                      <p class="mb-0 "><b>Location: </b> <%=history[i].State%>, <%=history[i].City%>  </p>

                    </div><img src="/resources/<%=history[i].Car_img%>" alt="Generic placeholder image" width="200" class="ml-lg-5 order-1 order-lg-2">
                  </div>
                  <!-- End -->
                </li>
                <% } %>
          <% } %>
          </div>
          </div>
          </div>
    </div>
  

      
 <!-- this is where history ends -->
    <div class="tab-pane fade" id="nav-listed" role="tabpanel" aria-labelledby="nav-contact-tab">
      <% if (carslisted.length===0){ %> 
        <br>
        <br>
        <br>
        <h3 class="text-center font-weight-light ">NO <span style="color: #ffd93b;">RYDE</span> LISTED</h3>
        <img src="images/nolisted.gif" class="text-center mx-auto d-block " height="200"  alt="GIF">
        <br>
        <div class="text-center">
          <a href="/booking"><button type="button" class="btn btn-outline-warning">Book a RYDE</button></a>
        <a href="/List"><button type="button" class="btn btn-warning" >List your RYDE</button></a>
      </div>
        <% } %>

      <% if (carslisted.length!==0){ %>
    <p class="display-4 text-center"><span style="color: #ffd93b;"><b>RYDES</b></span> Listed</p>
    <div class="container py-5">
    <div class="row ">
      <div class="col-8 mx-auto">
  
        <!-- List group-->
        <ul class="list-group shadow">
          <% for(let i=0; i<carslisted.length; i++){%>
          <!-- list group item-->
          <li class="list-group-item">
            <!-- Custom content-->
            <div class="media align-items-lg-center flex-column flex-lg-row p-3">
              <div class="media-body order-2 order-lg-1">
                <h5 class="mt-0 mb-2 h3" style="color: #ffd93b;"><%=history[i].Car_category%></h5>
                <p class="font-italic text-muted mb-0 lead"><%=carslisted[i].Description%> </p>
                <h6 class="font-weight-bold my-2">₹ <%=history[i].Price%></h6>
                <p class="mb-0 "><b>Availability: </b> <%=carslisted[i].Availability%></p> 
                <p class="mb-0 "><b>Offers: </b> <%=carslisted[i].Offers%></p>

              </div><img src="/resources/<%=carslisted[i].Car_img%>" alt="Generic placeholder image" width="200" class="ml-lg-5 order-1 order-lg-2">
            </div>
            <!-- End -->
          </li>
          <% } %>
    <% } %>
    </div>
  </div>
</div>
</div>
    
    
    <footer class="blog-footer">
      <p class="float-right"><a href="#">Back to top</a></p>
      <p> and copy; 2018-2021 AMU, Inc.  &middot; <a href="#">Privacy</a>  &middot; <a href="#">Terms</a></p>
    </footer>
  
  
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
      crossorigin="anonymous"></script>
  </body>


</html>